---
alwaysApply: true
---

# 开发日志自动管理规则

> 自动管理项目开发日志，实现任务自动循环执行、自动更新日志、自动规划下一步的完整流程

## 核心原则

### 自动化循环流程（必须严格执行）

每次处理开发任务时，必须遵循以下**自动化循环流程**，形成持续执行的闭环：

#### 🔄 循环流程

```
1. 📖 读取开发日志 → 2. ⚙️ 执行任务 → 3. 📝 更新日志 → 4. 🔄 继续执行
                                    ↑                            ↓
                                    └──────── 检查是否有剩余任务 ──┘
```

#### 详细步骤

1. **📖 开始前：读取开发日志**
   - **必须**在开始工作前读取 `AI_DEV_LOG.md` 文件
   - 检查"下一步计划"部分，确定当前应该执行的任务
   - 按照任务在日志中的顺序执行（从上到下）

2. **⚙️ 执行中：按计划推进**
   - 严格按照开发日志中的"下一步计划"执行任务
   - 一次可以完成一个完整任务或一个任务的多个子任务
   - 确保代码质量和功能完整性

3. **📝 完成后：自动更新日志（关键步骤）**
   - **立即**将已完成的任务从"下一步计划"移动到"已完成"部分
   - 使用 `- ✅` 替换原来的 `- [ ]` 标记
   - 更新"今日概览"，添加完成的任务描述
   - 检查"下一步计划"中是否还有剩余任务

4. **🔄 循环执行：持续推进**
   - **如果还有未完成的任务，自动继续执行下一个任务**
   - 不需要等待用户指示，直接进入下一轮循环
   - 持续循环直到所有任务完成或用户明确要求停止

#### ⚠️ 重要提醒

- **不能跳过日志直接执行任务**：必须先从日志中读取计划
- **不能积累任务后再更新日志**：每完成一个任务就立即更新
- **不能等待用户指示才继续**：有剩余任务就自动继续执行

## 开发日志格式规范

### 标准结构

开发日志必须包含以下标准结构：

```markdown
## 项目名称 开发日志（Dev Log）

> 本文档用于记录项目开发进展、已完成事项和下一步计划

---

### YYYY-MM-DD

**今日概览**
- [简要描述今天完成的主要工作]

**已完成**

#### [模块名称/阶段名称]

- ✅ [已完成的任务描述]
  - [子任务或详细说明]
- ✅ [已完成的任务描述]

**下一步计划**

- [ ] **[模块名称/阶段名称]**
  - [ ] [待完成任务1]
    - [ ] [子任务1]
    - [ ] [子任务2]
  - [ ] [待完成任务2]
```

### 任务标记规范

- **已完成任务**：使用 `- ✅` 标记，放在"已完成"部分
- **待完成任务**：使用 `- [ ]` 标记，放在"下一步计划"部分
- **进行中的任务**：使用 `- [🔄]` 标记（可选，表示正在处理）

## 自动化管理流程

### 第一阶段：读取开发日志

每次开始工作前，必须执行：

1. **读取开发日志文件**
   - 读取 `AI_DEV_LOG.md` 文件
   - 解析"下一步计划"部分
   - 识别所有待完成的任务（`- [ ]` 标记的项）

2. **确定当前任务**
   - 按照任务在日志中的顺序执行
   - 优先执行顶层任务（模块级任务）
   - 子任务在父任务完成后继续执行

3. **确认任务范围**
   - 一次可以完成一个完整任务或一个任务的部分子任务
   - 确保任务完成度清晰可追踪

### 第二阶段：执行任务

按照开发日志中的计划执行任务：

1. **执行开发工作**
   - 按照任务描述完成代码开发
   - 遵循项目的代码规范和架构模式
   - 确保代码质量和功能完整性

2. **验证任务完成**
   - 确保任务的所有要求都已满足
   - 检查代码是否正确运行
   - 验证功能是否符合预期

### 第三阶段：更新开发日志（关键步骤）

任务完成后，**必须立即更新开发日志**，不能拖延或积累。

#### 步骤 1：移动已完成的任务（核心操作）

执行以下三个操作，顺序不能颠倒：

1. **从"下一步计划"中移除已完成的任务**
   - 找到已完成的任务项（`- [ ]` 标记的所有相关行）
   - 从"下一步计划"部分**完全删除**该任务及其所有子任务
   - 注意：要删除整个任务块，包括所有缩进的子任务

2. **添加到"已完成"部分**
   - 找到对应的模块/阶段（如"Phase 3：简历编辑模块"）
   - 如果模块不存在，在"已完成"部分创建对应的模块标题
   - 将任务添加到该模块下
   - **将 `- [ ]` 改为 `- ✅`**，保留任务的完整描述和子任务结构
   - 如果所有子任务都完成了，也标记为 `- ✅`

3. **更新"今日概览"**
   - 在"今日概览"列表中添加完成的任务描述
   - 简要说明完成的主要工作（1-2 句话）
   - 格式：`- [简要描述完成的工作]`

#### 步骤 2：规划新的下一步计划

如果还有未完成的任务：

1. **检查剩余任务**
   - 查看"下一步计划"中剩余的任务
   - 确认任务之间的依赖关系

2. **更新任务状态**
   - 如果某个模块的任务全部完成，可以从"下一步计划"中移除该模块
   - 如果部分任务完成，更新任务描述，明确剩余的工作

3. **添加新的任务（如需要）**
   - 根据项目进度，可能需要添加新的任务
   - 确保新任务与现有计划保持一致

#### 步骤 3：标记任务完成状态

在移动任务时，确保：

- **完整任务**：整个任务和所有子任务都完成 → 移动到"已完成"
- **部分完成**：任务的部分子任务完成 → 更新任务描述，标记已完成的子任务
- **新增内容**：在"已完成"部分添加完成时间、技术要点等（可选）

### 第四阶段：继续执行或结束

1. **检查是否还有任务**
   - 查看"下一步计划"部分是否还有未完成的任务
   - 如果有，继续执行下一个任务（回到第一阶段）

2. **循环执行**
   - 形成"读取日志 → 执行任务 → 更新日志 → 继续执行"的循环
   - 直到所有任务完成

3. **任务全部完成**
   - 当"下一步计划"为空或所有任务都已完成时
   - 在日志中添加完成标记
   - 可以询问用户是否需要添加新的任务或阶段

## 具体操作示例

### 示例 1：完成单个任务后更新日志

**场景**：完成"求职期望编辑模块"任务

**执行前（开发日志）：**

```markdown
**今日概览**

- 完成个人信息编辑模块

**下一步计划**

- [ ] **Phase 3：简历编辑模块**
  - [ ] 实现求职期望编辑模块
    - [ ] 创建 `EditJobExpectationPage` 页面
    - [ ] 表单字段：期望职位、期望薪资、期望行业
    - [ ] 对接 `ResumeRepository.editJobExpectation()` 接口
  - [ ] 实现工作经历编辑模块
    - [ ] 创建 `EditWorkExperiencePage` 列表页
```

**执行后（开发日志）：**

```markdown
**今日概览**

- 完成个人信息编辑模块
- 完成求职期望编辑模块（创建页面、表单字段、接口对接）

**已完成**

#### Phase 3：简历编辑模块

- ✅ **求职期望编辑模块**
  - 创建 `EditJobExpectationPage` 页面
  - 表单字段：期望职位、期望薪资、期望行业
  - 对接 `ResumeRepository.editJobExpectation()` 接口

**下一步计划**

- [ ] **Phase 3：简历编辑模块**
  - [ ] 实现工作经历编辑模块
    - [ ] 创建 `EditWorkExperiencePage` 列表页
    - [ ] 创建 `WorkExperienceFormPage` 表单页
```

**关键操作**：
1. ✅ 从"下一步计划"中删除了"实现求职期望编辑模块"整个任务块
2. ✅ 在"已完成"部分添加了任务，标记为 `- ✅`
3. ✅ 在"今日概览"中添加了完成描述

### 示例 2：完成部分任务

**执行前：**

```markdown
- [ ] 实现工作经历编辑模块
  - [ ] 创建 `EditWorkExperiencePage` 列表页
  - [ ] 创建 `WorkExperienceFormPage` 表单页
  - [ ] 列表展示、添加、编辑、删除功能
```

**执行后（部分完成）：**

```markdown
**已完成**

- ✅ **工作经历编辑模块（部分完成）**
  - ✅ 创建 `EditWorkExperiencePage` 列表页
  - ✅ 创建 `WorkExperienceFormPage` 表单页
  - 🔄 列表展示、添加、编辑、删除功能（进行中）

**下一步计划**

- [ ] **工作经历编辑模块（剩余部分）**
  - [ ] 完善列表展示功能
  - [ ] 实现添加、编辑、删除功能
  - [ ] 对接 `ResumeRepository.editWorkExperience()` 接口
```

### 示例 3：自动循环执行

```
1. AI 读取开发日志
   → 发现"下一步计划"中有"实现求职期望编辑模块"

2. AI 执行任务
   → 创建页面、实现表单、对接接口

3. AI 更新开发日志
   → 将任务移到"已完成"
   → 检查还有"工作经历编辑模块"待完成

4. AI 继续执行
   → 自动读取日志，继续执行下一个任务
   → 循环直到所有任务完成
```

## 特殊情况处理

### 任务依赖关系

如果任务之间存在依赖关系：

1. **识别依赖**
   - 分析任务描述，识别前置依赖
   - 确保依赖任务先完成

2. **调整执行顺序**
   - 如果依赖任务未完成，先完成依赖任务
   - 更新日志，说明执行顺序调整

### 任务拆分

如果某个任务太大，可以拆分：

1. **识别可拆分点**
   - 将大任务拆分为多个子任务
   - 确保每个子任务都是可独立完成的

2. **更新日志结构**
   - 在"下一步计划"中拆分为多个子任务
   - 每个子任务完成后单独标记

### 任务取消或修改

如果某个任务需要取消或修改：

1. **说明原因**
   - 在"已完成"或"下一步计划"中添加说明
   - 解释为什么取消或修改

2. **更新计划**
   - 如果取消，从"下一步计划"中移除
   - 如果修改，更新任务描述

## 自动化规则检查清单

每次更新开发日志时，检查以下项目：

- [ ] 已完成的任务已从"下一步计划"中移除
- [ ] 已完成的任务已添加到"已完成"部分，并标记为 ✅
- [ ] "今日概览"已更新，包含完成的主要工作
- [ ] "下一步计划"中的剩余任务清晰明确
- [ ] 任务之间的依赖关系已考虑
- [ ] 日志格式符合规范要求

## 与用户的交互

### 任务完成后的提示

每次完成一批任务并更新日志后，提示用户：

```
✅ 已完成以下任务：
- [任务1]
- [任务2]

📝 已更新开发日志，将任务移到"已完成"部分

📋 下一步计划：
- [下一个任务]

🔄 是否继续执行下一个任务？
```

### 所有任务完成后的提示

当所有任务完成后：

```
🎉 所有任务已完成！

📝 开发日志已更新，所有任务已移到"已完成"部分

📋 "下一步计划"已清空，可以开始新的阶段或添加新任务

是否需要：
1. 开始新的开发阶段？
2. 添加新的任务到开发日志？
3. 进行代码审查或测试？
```

## 注意事项

1. **必须读取日志**
   - 每次开始工作前，必须先读取开发日志
   - 不能跳过日志直接执行任务

2. **必须更新日志**
   - 每次完成任务后，必须立即更新开发日志
   - 不能积累多个任务后再更新

3. **保持格式一致**
   - 严格按照标准格式更新日志
   - 保持任务描述的完整性

4. **自动循环执行**
   - 如果还有未完成的任务，自动继续执行
   - 不需要用户每次手动触发

5. **清晰的进度追踪**
   - 确保日志能清晰反映项目进度
   - 已完成和待完成的任务一目了然

## 快速参考（Quick Reference）

### 核心工作流程

```
┌─────────────────────────────────────────────────────────────┐
│  1. 📖 读取 AI_DEV_LOG.md                                    │
│     → 找到"下一步计划"部分的第一个 [ ] 任务                  │
├─────────────────────────────────────────────────────────────┤
│  2. ⚙️ 执行该任务                                             │
│     → 开发代码、实现功能、确保质量                            │
├─────────────────────────────────────────────────────────────┤
│  3. 📝 立即更新开发日志                                       │
│     → 从"下一步计划"删除任务                                 │
│     → 添加到"已完成"部分，标记为 ✅                          │
│     → 更新"今日概览"                                         │
├─────────────────────────────────────────────────────────────┤
│  4. 🔄 检查是否还有任务                                       │
│     → 有任务？自动继续执行下一个（回到步骤 1）               │
│     → 无任务？提示用户所有任务已完成                         │
└─────────────────────────────────────────────────────────────┘
```

### 更新日志的标准操作

1. **删除**：从"下一步计划"中删除已完成的任务（整个任务块）
2. **添加**：将任务添加到"已完成"部分，`- [ ]` 改为 `- ✅`
3. **更新**：在"今日概览"中添加完成的工作描述

### 自动循环触发条件

- ✅ 任务完成 + 日志已更新 + "下一步计划"还有任务 = **自动继续执行下一个任务**
- ✅ 任务完成 + 日志已更新 + "下一步计划"为空 = **提示用户所有任务已完成**

---

**说明**：此规则确保开发日志能够自动管理，实现任务的自动循环执行和进度追踪，提高开发效率。**核心要点**：读日志 → 执行任务 → 更新日志 → 自动继续，形成闭环。
